### 平衡二叉查找树

平衡二叉树：任意一个节点的左右子树高度相差不能大于1，如AVL树。

红黑树不一定严格满足上面的定义。只要树的高度不比 $\log_2n$ 大很多，也是合格的平衡二叉树。

### 红黑树（Red-Black Tree）

红黑树满足：

1. 根节点是黑色的
2. 每个叶子节点都是黑色的空节点。也就是说，叶子节点不存储数据
3. 任何相邻的节点都不能同时为红色。也就是说，红色节点是被黑色节点隔开的
4. 每个节点，从该节点到达其可达叶子节点的所有路径，都包含相同数目的黑色节点

红黑树的高度

如果删除红色节点，有些节点就没有父节点了，它们会直接连到祖父节点上，之前的二叉树变成了四叉树。四叉黑树的高度低于完全二叉树，所以高度不会超过 $\log n$ 。现在把红色节点加回去，由于红色节点不能相邻，所以高度不会超过 $2\log n$ 。

### 红黑树与AVL树

红黑树是一种近似平衡的二叉查找树，插入、删除、查找操作的时间复杂度都是 $O(\log n)$ ，性能非常稳定。

AVL树是一种高度平衡的二叉树，查找效率非常高，但插入、删除比较耗时。

### 红黑树与2-3树

2-3树是二叉查找树的变种，也是一种平衡树，包含两种节点：

+ 2-节点：普通二叉树节点，包含一个元素，两条子链接。

+ 3-节点：包含两个元素和三条子链接。两个元素 A<B，左子链接指向的数小于A，右子链接指向的数大于B，中链接介于A和B之间。

2-3数的构造：

+ 如果将值插入一个2-节点，则2-节点扩充为一个3-节点。

+ 如果将值插入一个3-节点，则变成一个4-节点，然后把这个4-节点分解，整个树增加一层。然后把新增加的父节点插入到上一级节点中，直到平衡。

2-3树的实现比较复杂，就有了红黑树。把3-节点中较小的元素（左链接）标成红色，其他为黑色，就变成了红黑树。

这样就可以理解红黑树的要求：

1. 相邻的两个节点不能都是红色（这样就会出现4-节点）。
2. 任意节点到叶子节点的所有路径，都包含相同数目的黑色节点（2-3树是严格平衡的，所以黑色节点也是严格平衡的）。



参考：

清晰理解红黑树的演变---红黑的含义 - 甜菜波波 - 博客园
https://www.cnblogs.com/tiancai/p/9072813.html

